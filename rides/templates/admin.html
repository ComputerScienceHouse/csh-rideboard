{% extends "layout.html" %} {% block content %}
<div class="bs-component">
    <div class="jumbotron">
        <h1 class="display-4 mt-4" align="center">{{ team.title }}</h1>
        <p class="lead" align="center">A team created by {{ team.owner }}.</p>
        <hr class="mb-4">
        <div class="d-flex ">
            <div><h5>Admin Controls</h5></div>
            <div class="ml-auto">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <a class="btn btn-info btn-sm" align="center" href="/edit/teamform/{{team.id}}"
                      id="edit::team::{{team.id}}">Edit Team</a>
                    <button type="button" class="btn btn-danger btn-sm" data-toggle="modal"
                      data-target="#deleteTeam{{team.id}}">Delete Team
                    </button>
                  </div>
            </div>
            <div class="modal" id="deleteTeam{{team.id}}">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Delete Team</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                          aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                      <p>Are you sure you want to delete this team?</p>
                    </div>
                    <div class="modal-footer">
                      <form method="get" action="/delete/team/{{team.id}}" id="delete::team::{{team.id}}">
                        <button type="submit" class="btn btn-danger">Yes</button>
                      </form>
                      <button type="button" class="btn btn-success" data-dismiss="modal" aria-label="Close">No
                      </button>
                    </div>
                  </div>
                </div>
              </div>
        </div>

        <hr class="my-3">
        <h5>Members</h5>
        <div style="overflow-y:auto;">
            <table class="table table-hover">
                <tr>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Controls</th>
                </tr>
            {% for member in members %}
            <tr>
                <td> {{ member.firstname }} {{ member.lastname }}</td>
                <td>{{ member.id }}</td>
                <td>
                    {% if current_user.id != member.id %}
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <button type="button" class="btn btn-warning btn-sm" data-toggle="modal"
                          data-target="#deleteMember{{member.id}}">Remove Member
                        </button>
                        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal"
                          data-target="#transferOwnership{{member.id}}">Transfer Ownership
                        </button>
                    </div>
                    <div class="modal" id="deleteMember{{member.id}}">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">Remove Member</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                  aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="modal-body">
                              <p>Are you sure you want to remove this member from the team?</p>
                            </div>
                            <div class="modal-footer">
                              <form method="get" action="/delete/member/{{team.id}}/{{member.id}}" id="delete::team::{{team.id}}::{{member.id}}">
                                <button type="submit" class="btn btn-danger">Yes</button>
                              </form>
                              <button type="button" class="btn btn-success" data-dismiss="modal" aria-label="Close">No
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="modal" id="transferOwnership{{member.id}}">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title">Transfer Ownership</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                  aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="modal-body">
                              <p>Are you sure you want to transfer ownership of this team to {{ member.firstname }} {{ member.lastname }}?</p>
                            </div>
                            <div class="modal-footer">
                              <form method="get" action="/transfer/{{team.id}}/{{member.id}}" id="transfer::{{team.id}}::{{member.id}}">
                                <button type="submit" class="btn btn-danger">Yes</button>
                              </form>
                              <button type="button" class="btn btn-success" data-dismiss="modal" aria-label="Close">No
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    {% endif %}
                </td>
              </tr>
            {% endfor %}
            </table>
        </div>
    </div>
</div>
{% endblock %}